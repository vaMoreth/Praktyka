<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../static/css/style.css"/>
    <title>–î–æ–≤—ñ–¥–∫–∞-–≤–∏–∫–ª–∏–∫</title>
    <link rel="shortcut icon" href="../static/images/logo.png" type="image/png">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid m-0 p-0">
        <div class="container-fluid header-text">
            <img src="../static/images/logo.png" class="logo-img ">
            <h4 class="text-center sub-header-name">–§–∞–∫—É–ª—å—Ç–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏</h4>
            <h6 class="mb-0 pb-0 text-center sub-header">–ü—Ä–∏–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∏–π –Ω–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —É–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç —ñ–º–µ–Ω—ñ –í–∞—Å–∏–ª—è –°—Ç–µ—Ñ–∞–Ω–∏–∫–∞</h6>
            <hr width="80%">
            <h1 class="pb-3 text-center">–§–æ—Ä–º—É–≤–∞–Ω–Ω—è –¥–æ–≤—ñ–¥–∫–∏-–≤–∏–∫–ª–∏–∫—Éüìù</h1>        
        </div>
        <div class="container m-15 pb-5 form-container text-center">
            <form action="/generate" method="POST" class="mt-3">
                <div class="form-group">
                    <label for="doc_number">–ù–æ–º–µ—Ä –¥–æ–≤—ñ–¥–∫–∏</label>
                    <input type="text" class="form-control" id="doc_number" name="doc_number" required>
                    <span id="doc-number-error-message" class="error-message">‚ùå –ù–æ–º–µ—Ä –¥–æ–≤—ñ–¥–∫–∏ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥'—î–º–Ω–∏–º —á–∏—Å–ª–æ–º –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –Ω—É–ª—é</span>
                </div>
                <div class="form-group">
                    <label for="issue_date">–î–∞—Ç–∞ –≤–∏–¥–∞—á—ñ</label>
                    <input type="date" class="form-control" id="issue_date" name="issue_date" required>
                </div>
                <div class="form-group">
                    <label for="course">–ö—É—Ä—Å</label>
                    <input type="text" class="form-control" id="course" name="course" required>
                    <span id="course-error-message" class="error-message">‚ùå –ö—É—Ä—Å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —á–∏—Å–ª–æ–º –≤—ñ–¥ 1 –¥–æ 6</span>
                </div>
                <div class="form-group">
                    <label for="name">–ü—Ä—ñ–∑–≤–∏—â–µ, —ñ–º'—è, –ø–æ –±–∞—Ç—å–∫–æ–≤—ñ —Å—Ç—É–¥–µ–Ω—Ç–∞<br><span class="help-text">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–æ–¥—ñ—Ç—å –¥–∞–Ω—ñ —É –¥–∞–≤–∞–ª—å–Ω–æ–º—É –≤—ñ–¥–º—ñ–Ω–∫—É</span></label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="–ü–µ—Ç—Ä–µ–Ω–∫—É –ü–µ—Ç—Ä—É –ü–µ—Ç—Ä–æ–≤–∏—á—É" required>
                </div>
                <div class="form-group">
                    <label for="days">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤</label>
                    <input type="number" class="form-control" id="days" name="days" readonly>
                </div>
                <div class="form-group">
                    <label for="start_date">–ü–æ—á–∞—Ç–æ–∫ –∑–∞—ó–∑–¥—É</label>
                    <input type="date" class="form-control" id="start_date" name="start_date" required>
                    <span id="start-date-error-message" class="error-message">‚ùå –î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ –Ω—ñ–∂ –¥–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è</span>
                </div>
                <div class="form-group">
                <label for="end_date">–ó–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –∑–∞—ó–¥—É</label>
                <input type="date" class="form-control" id="end_date" name="end_date" required>
            </div>
            <div class="form-group">
                <label for="format">–§–æ—Ä–º–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç—É</label>
                <select class="form-control" id="format" name="format">
                    <option value="docx">DOCX</option>
                    <option value="pdf">PDF</option>
                </select>
            </div>
            <span id="start-date-error-message" class="error-message">‚ùå –î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ –Ω—ñ–∂ –¥–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è</span>
            <button type="submit" class="btn btn-primary submit-btn">–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –¥–æ–≤—ñ–¥–∫—É ‚≠≥</button>
        </form>
    </div>
</div>
    <script>
        document.querySelector('form').addEventListener('submit', function(event) {
            let isValid = true;
    
            // –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–æ–º–µ—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç—É
            let docNumberInput = document.getElementById('doc_number');
            let docNumberValue = parseInt(docNumberInput.value, 10);
            let docNumberErrorMessage = document.getElementById('doc-number-error-message');
            if (isNaN(docNumberValue) || docNumberValue <= 0) {
                docNumberInput.classList.add('error');
                docNumberErrorMessage.style.display = 'block';
                isValid = false;
            } else {
                docNumberInput.classList.remove('error');
                docNumberErrorMessage.style.display = 'none';
            }
    
            // –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∫—É—Ä—Å—É
            let courseInput = document.getElementById('course');
            let courseValue = parseInt(courseInput.value, 10);
            let courseErrorMessage = document.getElementById('course-error-message');
            if (isNaN(courseValue) || courseValue < 1 || courseValue > 6) {
                courseInput.classList.add('error');
                courseErrorMessage.style.display = 'block';
                isValid = false;
            } else {
                courseInput.classList.remove('error');
                courseErrorMessage.style.display = 'none';
            }
    
            // –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞—Ç
            let startDateInput = document.getElementById('start_date');
            let endDateInput = document.getElementById('end_date');
            let startDateValue = new Date(startDateInput.value);
            let endDateValue = new Date(endDateInput.value);
            let startDateErrorMessage = document.getElementById('start-date-error-message');
            if (startDateValue > endDateValue) {
                startDateInput.classList.add('error');
                endDateInput.classList.add('error');
                startDateErrorMessage.style.display = 'block';
                isValid = false;
            } else {
                startDateInput.classList.remove('error');
                endDateInput.classList.remove('error');
                startDateErrorMessage.style.display = 'none';
            }
    
            if (!isValid) {
                event.preventDefault();
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            const startDateInput = document.getElementById('start_date');
            const endDateInput = document.getElementById('end_date');
            const daysInput = document.getElementById('days');

        function calculateDays() {
            const startDate = new Date(startDateInput.value);
            const endDate = new Date(endDateInput.value);
            if (startDate && endDate && endDate >= startDate) {
                const difference = endDate - startDate;
                const days = difference / (1000 * 60 * 60 * 24);
                daysInput.value = Math.ceil(days);
            } else {
                daysInput.value = '';
            }
        }

    startDateInput.addEventListener('change', calculateDays);
    endDateInput.addEventListener('change', calculateDays);
});
    </script>
</body>
</html>
